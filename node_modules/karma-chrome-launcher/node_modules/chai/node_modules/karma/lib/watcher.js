var chokidar = require('chokidar')
var mm = require('minimatch')
var expandBraces = require('expand-braces')

var helper = require('./helper')
var log = require('./logger').create('watcher')

var DIR_SEP = require('path').sep

// Get parent folder, that be watched (does not contain any special globbing character)
var baseDirFromPattern = function (pattern) {
  return pattern
    .replace(/[\/\\][^\/\\]*\*.*$/, '')              // remove parts with *
    .replace(/[\/\\][^\/\\]*[\!\+]\(.*$/, '')        // re